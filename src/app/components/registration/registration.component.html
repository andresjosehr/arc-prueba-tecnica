<app-menu></app-menu>
<div class="registration">
    <mat-card class="card">
        <mat-card-content>
            <div class='card-content' fxLayout=row>
                <div class="left-side" fxFlex="35">
                    <div class="user-info">
                        <img width="32px" src="assets/avatar.png" alt="avatar">
                        <div class='user-name'>Jhon Vargas Aranda</div>
                        <div>NPN #023945</div>
                    </div>
                </div>
                <div class='right-side' fxFlex="65">
                    <div class="form">
                        <mat-stepper linear #stepper>
                            <mat-step [stepControl]="firstFormGroup" [editable]="isEditable">
                                <div class='form' [formGroup]="firstFormGroup">
                                    <div fxLayout='row warp' fxLayoutGap='15px grid'>
                                        <div fxFlex="50">
                                            <ng-template matStepLabel>First Name</ng-template>
                                            <mat-form-field>
                                                <mat-label>First Name</mat-label>
                                                <input matInput formControlName="first_name" required>
                                                <mat-error *ngIf="firstFormGroup.get('first_name')?.hasError('required')">This field is required</mat-error>
                                                <mat-error *ngIf="firstFormGroup.get('first_name')?.hasError('minlength')">The field must be greater than three characters</mat-error>
                                                <mat-error *ngIf="firstFormGroup.get('first_name')?.hasError('maxlength')">The field must be less than twenty characters</mat-error>
                                                <mat-error *ngIf="firstFormGroup.get('first_name')?.hasError('especialCharacter')">The field can't have especial characters</mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div fxFlex="50">
                                            <ng-template matStepLabel>Last Name</ng-template>
                                            <mat-form-field>
                                                <mat-label>Last name</mat-label>
                                                <input matInput formControlName="last_name" required>
                                                <mat-error *ngIf="firstFormGroup.get('last_name')?.hasError('required')">This field is required</mat-error>
                                                <mat-error *ngIf="firstFormGroup.get('last_name')?.hasError('minlength')">The field must be greater than three characters</mat-error>
                                                <mat-error *ngIf="firstFormGroup.get('last_name')?.hasError('maxlength')">The field must be less than twenty characters</mat-error>
                                                <mat-error *ngIf="firstFormGroup.get('last_name')?.hasError('especialCharacter')">The field can't have especial characters</mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div fxFlex="50">
                                            <ng-template matStepLabel>Height Inches</ng-template>
                                            <mat-form-field>
                                                <mat-label>Height Inches</mat-label>
                                                <input numeric [decimals]="2" type="text" matInput formControlName="height_inches">
                                                <mat-error *ngIf="firstFormGroup.get('height_inches')?.hasError('max')">Height cannot be greater than ten</mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div fxFlex="50">
                                            <ng-template matStepLabel>Height Feet</ng-template>
                                            <mat-form-field>
                                                <mat-label>Height Feet</mat-label>
                                                <input numeric [decimals]="2" type="text" matInput formControlName="height_feet">
                                            </mat-form-field>
                                        </div>
                                        <div fxFlex="50">
                                            <ng-template matStepLabel>Weight Pounds</ng-template>
                                            <mat-form-field>
                                                <mat-label>Weight Pounds</mat-label>
                                                <input numeric [decimals]="2" matInput formControlName="weight_pounds" step="0.01">
                                            </mat-form-field>
                                        </div>
                                        <div fxFlex="50">
                                            <ng-template matStepLabel>Position</ng-template>

                                            <mat-form-field>
                                                <mat-label>Position</mat-label>
                                                <mat-select formControlName="position" required>
                                                  <mat-option value="A">A</mat-option>
                                                  <mat-option value="B">B</mat-option>
                                                  <mat-option value="C">C</mat-option>
                                                  <mat-option value="D">D</mat-option>
                                                </mat-select>
                                                <mat-error *ngIf="firstFormGroup.get('position')?.hasError('required')">This field is required</mat-error>
                                              </mat-form-field>
                                        </div>
                                        <div *ngIf='this.firstFormGroup.get("position")?.value=="C"' fxFlex="100">
                                            <div class='position-fields' fxLayout='row warp' fxLayoutGap='15px grid'>
                                                <div fxFlex="50">
                                                    <mat-form-field>
                                                        <mat-label>Comments</mat-label>
                                                        <!-- formControlName="weight_pounds" -->
                                                        <input matInput>
                                                    </mat-form-field>
                                                </div>
                                                <div fxFlex="50">
                                                    <mat-form-field>
                                                        <mat-label>Time in years in the position</mat-label>
                                                        <!-- formControlName="weight_pounds" -->
                                                        <input matInput>
                                                    </mat-form-field>
                                                </div>
                                                <div fxFlex="100">
                                                    <section class="example-section">
                                                        <mat-checkbox class="position-checkbox" *ngFor='let position of positions' value='position' [disabled]="position=='C'" [checked]="position=='C'">{{position}}</mat-checkbox>
                                                    </section>
                                                </div>
                                            </div>
                                        </div>

                                        <div fxFlex="50">
                                            <ng-template matStepLabel>Birth date</ng-template>

                                            <mat-form-field>
                                                <mat-label>Choose a date</mat-label>
                                                <input (click)="datepicker.open()" formControlName="birth_date" matInput [matDatepicker]="datepicker">
                                                <mat-datepicker-toggle matSuffix [for]="datepicker"></mat-datepicker-toggle>
                                                <mat-datepicker #datepicker>
                                                  <mat-datepicker-actions>
                                                    <button mat-button matDatepickerCancel>Cancel</button>
                                                    <button mat-raised-button color="primary" matDatepickerApply>Apply</button>
                                                  </mat-datepicker-actions>
                                                </mat-datepicker>
                                              </mat-form-field>
                                            
                                        </div>
                                        <div fxFlex="50">
                                            <ng-template matStepLabel>Age</ng-template>
                                            <mat-form-field>
                                                <mat-label>Age</mat-label>
                                                <input [readonly]="true" matInput formControlName="age">
                                            </mat-form-field>
                                        </div>
                                        <div class="next-btn">
                                            <button mat-button matStepperNext>Next</button>
                                        </div>
                                </div>
                              </div>
                            </mat-step>
                            <mat-step [stepControl]="secondFormGroup" [editable]="isEditable">
                                <div class="crud-body max-width">
                                    <div class='crud-form'>
                                        <mat-card class='plan-card plan-card-order' style="padding: 22px 20px;" [formGroup]='teamFormGroup'>
                                            <div fxLayout="row wrap" fxLayoutGap="20px grid">
                                                <div fxFlex='33' class='seach-options'>
                                                    <mat-form-field appearance="outline" style="font-size: 12px; width: 100%;">
                                                        <mat-label>Abbreviation</mat-label>
                                                        <input formControlName='abbreviation' matInput>
                                                        <mat-error *ngIf="teamFormGroup.get('abbreviation')?.hasError('minlength') || teamFormGroup.get('abbreviation')?.hasError('maxlength')">This field must have 3 characters</mat-error>
                                                        <mat-error *ngIf="teamFormGroup.get('abbreviation')?.hasError('required')">This field is required</mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex='33' class='seach-options'>
                                                    <mat-form-field appearance="outline" style="font-size: 12px; width: 100%;">
                                                        <mat-label>Converence</mat-label>
                                                        <mat-select formControlName="converence" required>
                                                            <mat-option value="Este">Este</mat-option>
                                                            <mat-option value="Oeste">Oeste</mat-option>
                                                            <mat-option value="Sur">Sur</mat-option>
                                                            <mat-option value="Norte">Norte</mat-option>
                                                        </mat-select>
                                                        <mat-error *ngIf="teamFormGroup.get('converence')?.hasError('required')">This field is required</mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex='33' class='seach-options'>
                                                    <mat-form-field appearance="outline" style="font-size: 12px; width: 100%;">
                                                        <mat-label>Comments</mat-label>
                                                        <input type="textarea" matInput formControlName='comments'>
                                                        <mat-error *ngIf="teamFormGroup.get('comments')?.hasError('required')">This field is required</mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex='33' class='seach-options'>
                                                    <mat-form-field appearance="outline" style="font-size: 12px; width: 100%;">
                                                        <mat-label>Team Name</mat-label>
                                                        <input formControlName='team_name' matInput>
                                                        <mat-error *ngIf="teamFormGroup.get('team_name')?.hasError('minlength')">The team name must have al least ten characters</mat-error>
                                                        <mat-error *ngIf="teamFormGroup.get('team_name')?.hasError('required')">This field is required</mat-error>
                                                    </mat-form-field>
                                                </div>

                                                <div fxFlex='33' class='seach-options'>
                                                    <mat-form-field appearance="outline" style="font-size: 12px; width: 100%;">
                                                        <mat-label>City</mat-label>
                                                        <mat-select formControlName="city" required>
                                                            <mat-option value="Ciudad 1">Ciudad 1</mat-option>
                                                            <mat-option value="Ciudad 2">Ciudad 2</mat-option>
                                                            <mat-option value="Ciudad 3">Ciudad 3</mat-option>
                                                            <mat-option value="Ciudad 4">Ciudad 4</mat-option>
                                                        </mat-select>
                                                        <mat-error *ngIf="teamFormGroup.get('city')?.hasError('required')">This field is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div fxFlex='16' class='seach-options'>
                                                    <button (click)='saveTeam()' style='width: 100%;background-color: #036e8f; margin-top: 5px; height: 40px;' color="primary" mat-raised-button>
                                                        <mat-icon  class='add-beneficiary-icon'>save</mat-icon>
                                                            Save
                                                    </button>
                                                </div>
                                                <div fxFlex='16' class='seach-options'>
                                                    <button (click)='cancel()' style='width: 100%;background-color: #cc3868; margin-top: 5px; height: 40px;' color="primary" mat-raised-button>
                                                        <mat-icon class='add-beneficiary-icon'>delete</mat-icon>
                                                            Cancel
                                                    </button>
                                                </div>
                                            </div>
                                        </mat-card>
                                    </div>
                                    <div class="table-container mat-elevation-z8">
                                        <table class='scond-step-form-table' mat-table [dataSource]="dataSource">
                                            <!-- Position Column -->
                                            <!-- <ng-container matColumnDef="id">
                                                <th mat-header-cell *matHeaderCellDef> ID </th>
                                                <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                                            </ng-container> -->
                            
                                            <!-- Weight Column -->
                                            <ng-container matColumnDef="Abbreviation">
                                                <th mat-header-cell *matHeaderCellDef>Abbreviation</th>
                                                <td mat-cell *matCellDef="let element"> {{element.abbreviation}} </td>
                                            </ng-container>
                            
                                            <!-- Symbol Column -->
                                            <ng-container matColumnDef="Converence">
                                                <th mat-header-cell *matHeaderCellDef>Converence</th>
                                                <td mat-cell *matCellDef="let element"> {{element.converence}} </td>
                                            </ng-container>

                                            <!-- Symbol Column -->
                                            <ng-container matColumnDef="Comments">
                                                <th mat-header-cell *matHeaderCellDef>Comments</th>
                                                <td mat-cell *matCellDef="let element"> {{element.comments}} </td>
                                            </ng-container>

                                            <!-- Symbol Column -->
                                            <ng-container matColumnDef="Team Name">
                                                <th mat-header-cell *matHeaderCellDef>Team Name</th>
                                                <td mat-cell *matCellDef="let element"> {{element.team_name}} </td>
                                            </ng-container>

                                            <!-- Symbol Column -->
                                            <ng-container matColumnDef="City">
                                                <th mat-header-cell *matHeaderCellDef>City</th>
                                                <td mat-cell *matCellDef="let element"> {{element.city}} </td>
                                            </ng-container>
                            
                                            <!-- Symbol Column -->
                                            <ng-container matColumnDef="Actions">
                                                <th mat-header-cell *matHeaderCellDef> Acciones </th>
                                                <td mat-cell *matCellDef="let element">
                                                    <button (click)='editTeam(element)' mat-button style='background-color: #036e8f; color: white; margin-right: 10px;'>
                                                        <mat-icon>edit</mat-icon>
                                                        Editar
                                                    </button>
                                                    <button (click)="confirmDelete(element.id)" mat-button style="background-color: #cc3868; color: white">
                                                        <mat-icon>delete</mat-icon>
                                                        Eliminar
                                                    </button>
                                                </td>
                                            </ng-container>
                            
                                            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                        </table>
                                    </div>

                                    <div class="next-btn" style="margin-top:10px">
                                        <button mat-button matStepperNext>Next</button>
                                    </div>
                                </div>
                            </mat-step>
                            <mat-step>
                              <ng-template matStepLabel>Done</ng-template>
                              <p>You are now done.</p>
                              <div>
                                <button mat-button matStepperPrevious>Back</button>
                                <button mat-button (click)="stepper.reset()">Reset</button>
                              </div>
                            </mat-step>
                          </mat-stepper>
                    </div>
                </div>
            </div>
        </mat-card-content>
      </mat-card>
</div>